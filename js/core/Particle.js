class Particle{constructor(x,y,radius,materialId='default'){const material=RYX_MATERIALS[materialId]||RYX_MATERIALS['default'];this.id='p_'+(Math.random().toString(36).substr(2,9));this.position=new Vector2(x,y);this.lastPosition=new Vector2(x,y);this.acceleration=new Vector2(0,0);this.radius=radius;this.materialId=materialId;this.color=material.color;this.mass=material.density*Math.PI*this.radius*this.radius*0.1;this.invMass=this.mass>0?1/this.mass:0;console.log(`[Particle]Created:${this.id}`,{material:this.materialId,pos:{x:x,y:y},radius:this.radius,mass:this.mass});}applyForce(force){console.log(`[Particle]ApplyingForceTo:${this.id}`,{forceX:force.x,forceY:force.y});this.acceleration.add(Vector2.multiply(force,this.invMass));}update(dt){console.log(`[Particle]Pre-update:${this.id}`,{pos:this.position.clone(),lastPos:this.lastPosition.clone()});const dtSq=dt*dt;const velocity=Vector2.subtract(this.position,this.lastPosition);this.lastPosition.set(this.position.x,this.position.y);const displacement=velocity;const accelTerm=new Vector2(this.acceleration.x*dtSq,this.acceleration.y*dtSq);this.position.add(displacement).add(accelTerm);this.acceleration.set(0,0);console.log(`[Particle]Post-update:${this.id}`,{pos:this.position.clone()});}}